<!-- Vis fundet sag -->
<div *ngIf="foundCase; else notFound">
  <h3>Fundet Sag</h3>
  <table>
    <tr>
      <th>ID</th>
      <th>Kunde</th>
      <th>Udstyrstype</th>
      <th>Problem</th>
      <th>Oprettet</th>
      <th>Forventet Levering</th>
      <th>Prioritet</th>
      <th>Tildelt Tekniker</th>
    </tr>
    <tr>
      <td>{{ foundCase.id }}</td>
      <td>{{ foundCase.customerName }}</td>
      <td>{{ foundCase.equipmentType }}</td>
      <td>{{ foundCase.problemDescription }}</td>
      <td>{{ foundCase.creationDate | date: 'dd-MM-yyyy' }}</td>
      <td>
        {{ foundCase.expectedDeliveryDate
        ? (foundCase.expectedDeliveryDate | date: 'dd-MM-yyyy')
        : 'Ikke angivet' }}
      </td>
      <td>{{ foundCase.priority }}</td>
      <td>{{ foundCase.assignedTechnician }}</td>
    </tr>
  </table>

  <div class="chat-box">
    <h2>CHAT MED TEKNIKKER</h2>

    <!-- Liste over chatbeskeder -->
    <div class="chat-container">
      <div *ngFor="let msg of chatMessages" class="chat-message">
        <strong>{{ msg.sender }}:</strong> {{ msg.message }}
      </div>
    </div>

    <div class="chat-input">
      <input
        type="text"
        [(ngModel)]="newMessage"
        placeholder="Skriv en besked..."
        (keydown.enter)="sendMessage()" />
      <button (click)="sendMessage()">Send</button>
    </div>

  <h2>Status</h2>
  <div class="progress-container">
    <div class="status-row">
      <span class="status-label">{{ statuses[currentStatusIndex] }}</span>
      <div class="status-bar">
        <div
          class="status-fill"
          [ngStyle]="{ width: ((currentStatusIndex + 1) / statuses.length) * 100 + '%' }"
        ></div>
      </div>
    </div>
  </div>
  </div>
</div>

<ng-template #notFound>
  <p>Sagen blev ikke fundet.</p>
</ng-template>
